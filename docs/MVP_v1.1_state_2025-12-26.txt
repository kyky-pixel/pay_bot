PAYBOT — зафиксированное состояние (MVP v1.1)

Дата фиксации: 2025-12-26

СТАТУС
Проект стабилен, сервис запущен через systemd, код в GitHub.
Все основные бизнес-требования MVP реализованы.

АРХИТЕКТУРА
- Сервер: CT101
- Путь проекта: /opt/services/paybot
- Запуск: systemd (python -m app.main)
- Виртуальное окружение: venv
- БД: SQLite (/opt/services/paybot/data/db.sqlite3)
- Экспорт: Google Sheets через Service Account

РОЛИ
- Пользователь: создаёт заявки
- Админ (tg_id=141565):
  - согласовать
  - отклонить
  - отправить на доработку
  - править поля заявки

ПОЛЯ ЗАЯВКИ (обязательные)
- Назначение (title)
- Сумма (amount)
- Тип оплаты: Нал / Безнал / Бизнес-карта
- Статья бюджета:
  - АХО
  - МБП
  - Закупка кухня
  - Закупка бар
  - Тех часть
  - ФОТ
  - Маркетинг
  - Другое
- Вложение: файл или фото (опционально)

ЛОГИКА АДМИНА
- Комментарий при решении — необязательный
- Кнопка ✏️ «Доработать»:
  - правка суммы
  - правка назначения
  - смена типа оплаты
  - смена статьи бюджета
  - сообщение пользователю
- Статус rework с уведомлением пользователя

GOOGLE SHEETS
- Листы по месяцам (MM.YYYY)
- Колонки:
  Дата | № | Автор | Назначение | Сумма | Оплата | Статья | Статус | Кто решил | Комментарий
- Новые строки добавляются НАД блоком ИТОГО
- ИТОГО пересчитывается автоматически

GIT
- Репозиторий: https://github.com/kyky-pixel/pay_bot
- Основная ветка: main
- Секреты, БД, venv — вне git

WORKFLOW
- Все новые правки делать в отдельных ветках (feature/*, fix/*)
- В main — только стабильные версии
- Деплой: git pull && systemctl restart paybot
